本文为您介绍通过控制台，从云数据库 MySQL 一键迁移至云原生数据库 TDSQL-C MySQL 版。
## 前提条件
- 迁移源端云数据库 MySQL 版本为 MySQL 5.7、8.0 的单节点版、双节点版或三节点版。
- 迁移源端的云数据库 MySQL 实例仅有主实例，没有只读实例和灾备实例。

## 操作步骤
使用一键迁移，将根据 [迁移规格对照表](#QYDZB) 创建一个规格对应的 TDSQL-C MySQL 版集群，并进行数据库迁移，在迁移完成后，需进行连接地址切换，详细操作流程如下。
### 一、开始迁移
1. 登录 [云数据库 MySQL 控制台](https://console.cloud.tencent.com/cdb/instance)。
2. 在实例列表勾选需要迁移的 MySQL 实例，单击上方的**一键迁移**。
![](https://qcloudimg.tencent-cloud.cn/raw/804b211a186b86f2c04031269b9dc037.png)
>?您也可以单击**实例 ID**进入实例详情页，然后单击右上方的**一键迁移**。
>
3. 进入迁移界面后，预览当前 MySQL 实例与迁移后的新 TDSQL-C MySQL 版集群的对比信息。
![](https://qcloudimg.tencent-cloud.cn/raw/9784b394873c186304cc7bd30bb0d3a5.png)

| 字段 | 说明 | 
|---------|---------|
| 所在地域 | 实例所在地域。 | 
| 所在网络 | 实例使用的网络。 | 
| 计算计费模式 | 实例计算节点的计费模式。 | 
| 存储计费模式 | 实例存储的计费模式。 | 
| 计算规格 | 实例的计算节点规格。 | 
| 存储规格 | 实例的存储容量。 | 
| 实例数 | 展示支持迁移的 MySQL 实例下的数量，当前仅支持主实例迁移。 | 
| 配置费用 | 展示迁移前后的配置费用。 | 

4. 在迁移界面，系统会对需要迁移的云数据库 MySQL 实例与迁移到 TDSQL-C MySQL 版后实例的信息进行迁移检查，您可根据检查结果对应操作。
**检查项如下**

| 检查项 | 说明 | 
|---------|---------|
| 可用区 | TDSQL-C MySQL 版暂不支持部分可用区，这类可用区实例将无法迁移。 |
| InnoDB 引擎 | TDSQL-C MySQL 版仅支持 InnoDB 引擎迁移，若需要迁移的 MySQL 实例为 RocksDB 引擎，则无法迁移。 |
| 外网开通 | 如需要迁移的 MySQL 实例开启了外网，则在迁移前需关闭外网。 |
| 具有只读实例 | 如需要迁移的 MySQL 实例具有只读实例，则无法迁移，当前版本无法迁移只读实例。 |
| 具有灾备实例 | 如需要迁移的 MySQL 实例具有灾备实例，则无法迁移，当前版本无法迁移灾备实例。 |
| 数据加密 | TDSQL-C MySQL 版暂不支持。 |
| 自定义密码复杂度功能 | 如需要迁移的 MySQL 实例开启自定义密码复杂度，则在迁移前需关闭。 |
| SSL | TDSQL-C MySQL 版暂不支持。 |
| 数据库代理 | 如需要迁移的 MySQL 实例开启了数据库代理，则在迁移前需关闭。此功能在迁移后的 TDSQL-C MySQL 版可重新开启和配置。 |

**情形一：迁移检查不通过**
若迁移检查不通过，将无法进行迁移，部分选项（数据加密、自定义密码复杂度、SSL、数据库代理）提供**一键修复**功能，您可单击**一键修复**，修复成功后可进行一键迁移。
**情形二：迁移检查通过**
若迁移检查通过，您可单击**一键迁移**开始迁移。
### 二、迁移中
一键迁移将采用迁移源端云数据库 MySQL 实例最近一次全量备份文件，在 TDSQL-C MySQL 版新建集群并持续进行数据同步，迁移期间云数据库 MySQL 实例显示迁移状态为**迁移中**，在TDSQL-C MySQL 版集群列表可以看到新建的目标集群，迁移状态也为**迁移中**。
![](https://qcloudimg.tencent-cloud.cn/raw/22e7eb38ea99483d8411ef4aaaee81f7.png)
>?
>- 数据同步完成后，将进行数据一致性校验，若校验完成，则迁移状态转换为“地址待切换”，点击**详情** > **切换**，进行连接地址切换，切换仅会造成秒级闪断，需要确保业务具有重连机制。
>- 地址待切换状态将存在**72小时**，若超时未操作，则视为放弃迁移，系统将自动取消迁移流程。
>- 点击切换后，IP 地址交换，数据将写入 TDSQL-C MySQL 版新建集群。

### 三、迁移完成
连接地址切换后，视为迁移完成，云数据库 MySQL 侧的迁移源端实例将自动进入回收站，退款将用于购买迁移后目标端的 TDSQL-C MySQL 版集群，购买结余金额将自动放回您的腾讯云账号中，后续您可登录 [TDSQL-C MySQL 版控制台](https://console.cloud.tencent.com/cynosdb/mysql/ap-beijing/cluster/cynosdbmysql-cg1ilwg6/detail) 对迁移后的新集群进行管理。
### 四、迁移回滚
>?本版本的一键迁移暂不支持回滚功能，请在连接地址切换前做好业务检查。若后续需要重新使用迁移源端的云数据库 MySQL 实例，需在有效期内进入云数据库 MySQL 侧回收站进行恢复，**恢复后连接地址将改变，需重新适配应用程序**。
